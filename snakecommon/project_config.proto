syntax = "proto3";
package snakecommon;
option go_package = "git.17zjh.com/snake/snake_proto/snakecommon";

import "snakecommon/config.proto";

message ConfigVersionInfo {
  map<string, string> flags = 1;
}

// === show_config begin ======================================
message ShowConfig {
  repeated ShowLevelConfig level_config = 1;
  repeated ShowSkillName skill_name = 2;
  string intro_v2 = 3;
  string addition_intro = 4;
  string intro = 5;
  repeated ShowIconStyle icon_style = 6;
}

message ShowIconStyle {
  int32 num = 1;
  string img_url = 2;
}

message ShowLevelConfig {
  string game_skill = 1;
  repeated CRewardItem reward = 2;
  string thumbnail = 3;
  string thum_anim_url = 4;
  string icon_url = 5;
  string anim_url = 6;
  int32 total_show = 7;
  int32 level = 8;
  repeated ShowSkillBuff game_skill_list = 9; // 不返回客户端
  string show = 10;
}

message ShowSkillName {
  int32 skill_type = 1;
  string name = 2;
}

message ShowSkillBuff {
  int32 skill_type = 1;
  string value = 2;
  string value_text = 3;
}
// === show_config end ======================================


// === user_config begin ======================================
message UserConfig {
  int32 gender_cost = 1; //性别修改需要的苹果数量
  string certify_url = 2; // 实名认证 url 地址
  int32 cache_clean_switch = 3; //1开2关
  int32 snake_coin_limit = 4; // 彩豆周上限
  string single_text_config = 5; // 单机右上角文案说明
  string qualifying_text_config = 6; // 团战右上角文案说明
  string clan_text_config = 7; // 战队赛结算右上角文案说明
  repeated DeviceConfig abnormal_store = 8;
  string zhi_token_url2 = 9; // 吱口令
  int32 send_red_pack_need_care = 10; // 红包守护值
  string upload_avatar_tips = 11; // 上传头像奖励
  int32 start_endless_flag = 12; // 是否首页直接进无尽，0否1是
  repeated int32 home_login_days = 13;//新用户第多少天登录 首次回首页后弹登录
  int32 nickname_home_count = 14;//新用户第三天登录 多少次回首页后弹改名
  ShowConfig show_config = 15;
  AntiAddiction anti_addiction = 16;
  int32 online_interval_seconds = 17;
  GameEndSkin game_end_skin = 18;
  repeated string workday_list = 19;
  repeated string holiday_list = 20;
  RenamePopupRule rename_popup_rule = 21;
  BindConfig bind_config = 22;
  SettingConfig setting_conf = 23;
  FeedbackConfig feedback = 24;
  FlagsConfig flags = 25;
  repeated CRewardItem certify_reward = 26;
  RegisterSurvey register_survey = 27;
  RecruitPopup recruit_popup = 28;
  MinorLimit minor_limit = 29;
  string login_limit_msg = 30;
  string age_tips_text = 31;
  string certify_reward_image = 32;
  NewUserConfig new_user_config = 33;
  int32 open_cp_button = 34; // 是否开启cp背景更换按钮，1为开
  int32 alipay_certify = 35;
  int32 channel_login_flag = 36;
  CommentConfig comment_config = 37; // 评论配置
  int32 login_page_flag = 38;
  string contact_text = 39;
  int32 login_home_count = 40;
  map<string, int32> unity_flags = 41;
  int32 use_topon = 42;
  IdfaConfig idfa_config = 43; // ios idfa 弹窗配置
  int32 visitor_flag = 44;
  int32 third_failed_visitor_flag = 45;
  repeated string third_failed_visitor_market = 46;
}

message MinorLimit {
  int32 max_age = 1;//小于这个18值的是未成年
  int32 hide_game_voice = 2; //1隐藏
  int32 hide_friend_rank = 3; //1隐藏
  OrderCurator order_curator = 4;
}

message OrderCurator {
  string link = 1;
  int32 need = 2; //1要弹
}

message FlagsConfig {
  int32 visitor_flag = 1;
  int32 delete_array_oes = 2;
  int32 first_blood_sound_effect = 3; //1是新音效，0默认音效
  int32 open_wedding_list_anim = 4; // 是否开启教堂婚礼列表动画
  int32 tcp_push_stash = 5; //是否开启暂存
  int32 open_goto_unity_endless = 6;
  int32 old_single_game_settle = 7;
  int32 sg_end_ui_flag = 8;
  int32 sigmob_delay = 9;
  int32 close_off_screen_rendering = 10;
  int32 memory_dot_delay = 11;
  int32 gl_check_app_state = 12;
  int32 ios_optimize_home_skin_flag = 13;
  int32 channel_social_huawei_state = 14;
  int32 channel_social_oppo_state = 15;
  int32 channel_social_vivo_state = 16;
  int32 new_image_chooser = 17;
  int32 close_native_operator_flag = 18;
  int32 downloader_state = 19;
  int32 downloader_pause_state_v2 = 20;
  int32 close_video_metal_render = 21;
  int32 jsbridge_stop_handle_special_charater = 22;
  int32 oppo_login_flag = 23;
  int32 oppo_login_retry_count = 24;
  int32 enable_webveiw_copy_file_to_temp = 25;
  int32 open_game_profiler = 26;
  int32 disable_invisible_memory_reclamation = 27;
  int32 yyb_tobid_ad_switch = 28;
  int32 not_show_idfa = 29;
}

message FeedbackConfig {
  int32 switch = 1;
  string version = 2;
  int32 register_days = 3;
  int32 play_count = 4;
  int32 score = 5;
  int32 limit = 6;
}

message SettingConfig {
  int32 game_multi_trans = 1;
  bool enable_volc = 2;
  bool enable_koom = 3;
  bool native_crash_report = 4;

  DocVersion doc_version = 5;
  NetworkCheck network_check = 6;
  Prometheus prometheus = 7;
  OkhttpDispatcher okhttp_dispatcher = 8;
  MemSwitch mem_switch = 9;
}

// 用户协议、隐私政策、未成年声明
message DocVersion {
  string agreement = 1;
  string privacy = 2;
  string announce = 3;
  string info_sharing_list = 4;
  string personal_info = 5;
}

message NetworkCheck {
  string resource = 1;
  string target = 2;
  int32 open = 3; //1开0隐藏
}

message Prometheus {
  int32 batch = 1;
  int32 bitmap_mem_threshold = 2;
  bool enabled = 3;
}

message OkhttpDispatcher {
  int32 queue_capacity = 1;
  int32 keep_live_time = 2;
}

message MemSwitch {
  bool rgb565_enabled = 1;
  bool rgb565_transform = 2;
  bool image_bg_opt = 3;
  bool anim_report_enabled = 4;
  bool fix_start_page_mem_leak = 5;
  float anim_sample_rate = 6;
}

message BindConfig {
  string bg_url = 1;
  int32 can_close = 2;
}

message RenamePopupRule {
  NewbieClub newbie_club = 1;
  QualifyingMatch qualifying_match = 2;
}

message QualifyingMatch {
  int32 limit = 1;
}

message NewbieClub {
  int64 interval = 1;
  int32 limit = 2;
}

message GameEndSkin {
  string notice_url = 1; //气泡图
  string link = 2; //跳转库
}

message DeviceConfig {
  string model = 1;//手机型号(MODEL)
  string product = 2;//当前手机品牌(PRODUCT)
  string brand = 3;//手机厂商(BOARD)
  string manufacturer = 4;//设备制造商(MANUFACTURER)
}

message AntiAddiction {// 防沉迷配置
  Notify notify = 1;
  MinorNotify minor_notify = 2; // 14岁以上未成年防沉迷配置
  string safe_game_notify = 3;
  PayNotify pay_notify = 4;
  SocialDesc social_desc = 5;
  IdentityAge identity_age = 6;
  CertifyNotify certify_notify = 7;
  string certify_url = 8;
  MinorNotify infant_notify = 9; // 12岁以下防沉迷配置，已废弃
  int32 need_certify = 10; // 实名开关，已废弃
}

message Notify {
  repeated CertifyGameConfig uncertified = 1;
  repeated CertifyGameConfig minor = 2;
}

/**
 * game_time : 10800
 * msg : 【健康系统】您今日的累计游戏时间已经超过3小时，为了您的健康，请您下线休息，做适当身体活动，注意劳逸结合。
 */
message CertifyGameConfig {
  int32 game_time = 1;
  string msg = 2;
  int32 interval_time = 3;
}

/**
 * "login_text": "为空则没有宵禁","begin": "22:00","end": "08:00",
 *         "workday_active": 3600,"holiday_active": 10800,"active_text": "超时提醒",
 *         "active_notice": "剩余活跃时间提醒{remain}占位","notice_interval": 1800
 */
message MinorNotify {
  string login_text = 1;
  string begin = 2;
  string end = 3;
  int32 workday_active = 4;
  int32 holiday_active = 5;
  string active_text = 6;
  string active_notice = 7;
  int32 notice_interval = 8;
  int32 addicted_flag = 9; //防沉迷开关 0关闭，1打开
  string title = 10;
  int32 active_time = 11;
}

message PayNotify {
  string minor = 1;
  int32 certify_flag = 2; //0不弹窗，1弹窗可充值，2弹窗不可充值
}

message SocialDesc {
  string broadcast = 1;
  string world = 2;
  string friend = 3;
  string clan = 4;
}

message IdentityAge {
  int32 minor = 1;
  int32 infant = 2;
}

message CertifyNotify {
  int32 active_limit = 1;
  int32 interval = 2;
  int32 limit = 3;
  int32 flag = 4; // 0不弹，1弹窗可关，2弹窗不可关
  repeated string ignore_market = 5;
  repeated string force_market = 6;
}

message IdfaConfig {
  repeated CRewardItem reward = 1;
  string ios_version = 2;
  bool force = 3;
  int32 login_count = 4;
  int32 first_pop = 5;
  int32 interval = 6;
}

message CommentConfig {
  int32 score = 1;
  int32 switch_state = 2;
}

message RegisterSurvey {
  int32 switch = 1; //1开0关
  int64 score = 2; //分数条件
  int32 new_user_day = 3; //注册多少天内算新手
  string qa_url = 4; //问卷链接，需替换 {uid}
  string mail_title = 5;
  string mail_content = 6;
  repeated CRewardItem reward = 7;
  string secretary_msg = 8;
  repeated int32 survey_ids = 9;
}

message RecruitPopup {
  int32 switch = 1;//1开0关
  int64 play_count = 2;//局数条件
  int64 score = 3;//分数条件
  string qa_url = 4;//问卷链接，需替换 {uid}
  int32 id = 5;// 期数
  string banner_url = 6;
  int32 screen_share = 7;
  string secretary_msg = 8;
}

/**
* "new_user_config": {
 *     "player_eat_food_rate_change_scope": 200,
*     "player_eat_food_count_for_increase_node": 10,
 * 		"eat_food_rate_change_scope": 200,
*     "eat_food_count_for_increase_node": 10,
 *     "guide_candy_total_count": 100, //新手引导糖果总个数
 *   	"guide_candy_score": 100, //新手引导糖果分数
 *     "free_revive_game_count": 5, //新手无尽前几局每局第一次免费复活
 *   }
 */
message NewUserConfig {
  int32 player_eat_food_rate_change_scope = 1;
  int32 player_eat_food_count_for_increase_node = 2;
  int32 eat_food_rate_change_scope = 3;
  int32 eat_food_count_for_increase_node = 4;
  int32 guide_candy_total_count = 5;
  int32 guide_candy_score = 6;
  int32 free_revive_game_count = 7;
  int32 newbie_login_days = 8;
  int32 newbie_qualifying_count = 9;
  int32 newbie_endless_count = 10;
  int32 guide_type = 11;
  string new_user_img = 12;
  string old_user_img = 13;
  repeated CRewardItem guide_reward = 14;
  int32 guide_skip_flag = 15; // 0关1开 新手引导流程修改实验开关
}
// === user_config end ========================================

// === offline_game_config start ========================================
message ReviveConfigItem {
  int32 ad_revive = 1;
  int32 card_revive = 2;
  int32 diamond_revive = 3;
}

message SingleGameAiConfigItem {
  int64 start_length = 1;
  double border_dis_factor = 2;
  double snake_dis_factor = 3;
  double wreck_dis_factor = 4;
  double ai_snake_view_angle = 5;
}

message FloaterConfig {
  repeated int32 born_len = 1;
  int32 born_count = 2;
  int32 born_count_v2 = 3;
  int32 born_radius = 4;
  int32 floater_score = 5;
  int32 interval_time = 6;
  repeated int32 born_len2 = 7;
}

message ActivityMapConfig {
  int32 start_time = 1;
  int32 end_time = 2;
  int32 new_map_theme_id = 3;
}

message EndlessLimitConfig {
  int64 ios_length_endless_limit_1 = 1;
  int64 ios_length_endless_limit_2 = 2;
  double ios_length_endless_time_limit_1 = 3;
  double ios_length_endless_time_limit_2 = 4;
  int64 android_length_endless_limit_1 = 5;
  int64 android_length_endless_limit_2 = 6;
  double android_length_endless_time_limit_1 = 7;
  double android_length_endless_time_limit_2 = 8;
  int64 ios_kill_endless_limit_1 = 9;
  int64 ios_kill_endless_limit_2 = 10;
  double ios_kill_endless_time_limit_1 = 11;
  double ios_kill_endless_time_limit_2 = 12;
  int64 android_kill_endless_limit_1 = 13;
  int64 android_kill_endless_limit_2 = 14;
  double android_kill_endless_time_limit_1 = 15;
  double android_kill_endless_time_limit_2 = 16;
}

message EndlessBubbleConfig {
  int32 start_time = 1;
  int32 finish_time = 2;
  string link = 3;
}

message EndlessTrackConfig {
  int32 start_len = 1;
  int32 interval_len = 2;
  int32 interval_second = 3;
}

message WildStormListItem {
  int32 duration = 1;
  double speed_rate = 2;
}

message WildStormConfig {
  double max_speed_rate = 1;
  repeated WildStormListItem wild_storm_list = 2;
}

message OfflineGameConfig {
  int32 big_snake_rate = 1;
  int32 medium_snake_rate = 2;
  int32 relive_length_limit = 3;
  int32 relive_need_diamond = 4;
  int32 snake_direction = 5;
  int32 twice_relive_diamond = 6;
  int32 twice_relive_length = 7;
  repeated ReviveConfigItem endless_revive_config = 8;
  repeated ReviveConfigItem endless_revive_config_ab1 = 9;
  repeated ReviveConfigItem endless_revive_config_ab2 = 10;
  repeated ReviveConfigItem excite_revive_config = 11;
  repeated ReviveConfigItem limit_revive_config = 12;
  int32 voice_broadcast = 13;
  int32 use_ai_v3 = 14;
  int32 new_kill_broadcast = 15;
  int32 new_map = 16;
  int32 recover = 17;
  FloaterConfig floater_config = 18;
  EndlessLimitConfig endless_limit_config = 19;
  ActivityMapConfig activity_map_config = 20;
  EndlessBubbleConfig endless_bubble = 21;
  EndlessTrackConfig endless_track = 22;
  WildStormConfig wild_storm = 23;
}

// === offline_game_config end ========================================