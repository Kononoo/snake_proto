syntax = "proto3";

package dream_game;
option go_package = "git.17zjh.com/snake/snake_proto/system/dream_game";

enum DreamGameSettleType {
    Normal = 0; // 正常主动结算
    Abnormal = 1; // 异常结算
    Exception = 2; // 发生未知错误，默认不进行结算
  }

// 玩家结算时的一些数据
message DreamGameEndGame {
  string uid = 1;              // 结算的玩家uid
  int32 platform = 3;
  string market = 4;
  string version = 5;
  string device_id = 6;
  int64 kill = 9;
  int64 length = 10;
  string rid = 11;                      // 本局游戏的rid
  int64 game_count = 12;                // 对局次数
  DreamGameSettleType settle_type = 13; // 结算类型, 0: 正常主动结算, 1: 异常结算, 2: 发生未知错误，默认不进行结算
  repeated string teammates = 14;       // 队友
  repeated DreamGameLoot loots = 15;    // 战利品列表
}

// 战利品信息
message DreamGameLoot {
  int64 item_id = 1;       // 物品ID
  int64 count = 2;         // 数量
  int64 durability = 3;    // 持久度
}

message DreamGameEndGameRsp {
}

message DreamGameEndGameNotify {
  string rid = 1;                    // 本局游戏的rid
  string score = 2;                  // 评级
  repeated DreamGameLoot loots = 3;  // 战利品列表
  repeated string teammates = 4;     // 队友列表
}

message DreamGameDeductPropReq {
  repeated string uid = 1;    // 进入游戏的玩家uid
  string rid = 2;             // 游戏房间ID
}

message DreamGameDeductPropRsp {
}

message DreamGameExitGameReq {
}

message DreamGameExitGameRsp {
}